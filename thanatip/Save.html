{% extends 'base/main.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}


<style type="text/css">
	#div_id_tags, #id_tags{
		overflow-y: scroll;
		max-height: 100px;
		border-radius: 5px;
		padding: 5px;
		border:1px solid #888;
	}
</style>
<section class="s2">
<div class="main-container">
	<h1>Imgs</h1>

	<form id="searchForm" method="GET">
		{{myFilter.form|crispy}}
		<input class="btn btn-primary" type="submit" value="search">
	</form>

	<div class="post-wrapper">

		{% for img in imgs %}
		<div>
			<div class="post">
				<img class="thumbnail" src="{{img.picture.url}}">
				
			</div>
		</div>
		{% empty %}
			<h3>No imgs found...</h3>
		{% endfor %}
	</div>

	<div class="row">
		
		{% if imgs.has_other_pages %}

			<ul class="pagination">

				{% if imgs.has_previous %}
					<li class="page-item"><a data-page="{{imgs.previous_page_number}}" href="?page={{imgs.previous_page_number}}" class="page-link">&laquo</a></li>

					<li class="page-item"><a data-page="1" href="?page=1" class="page-link">First</a></li>
				{% endif %}


				{% for i in imgs.paginator.page_range %}
					{% if imgs.number == i %}
						<li class="page-item"><a class="active page-link">{{i}}</a></li>
					{% else %}
						<li class="page-item"><a data-page="{{i}}" href="?page={{i}}" class="page-link">{{i}}</a></li>
					{% endif %}
					
				{% endfor %}


				{% if imgs.has_next %}
					<li class="page-item"><a data-page="{{imgs.paginator.num_pages}}" href="?page={{imgs.paginator.num_pages}}" class="page-link">Last</a></li>

					<li class="page-item"><a data-page="{{imgs.next_page_number}}" href="?page={{imgs.next_page_number}}" class="page-link">&raquo</a></li>
				{% endif %}
			</ul>

		{% endif %}
	</div>
</div>
</section>

<script type="text/javascript">
	let searchForm = document.getElementById('searchForm')
	let pageLinks = document.getElementsByClassName('page-link')

	for(var i=0; pageLinks.length > i; i++){

		pageLinks[i].addEventListener('click', function(e){
			e.preventDefault()
			let page = this.dataset.page
			console.log('Page:', page)
			searchForm.innerHTML += `<input value="${page}" name="page" hidden >`
			searchForm.submit()
		})

	}
</script>
<footer class="py-4 bg-primary text-white-20">
	<center>
		<h5 style="color:white;">Copyright &copy; Thanatip Portfolio</h5>
	</center>	
</footer>
{% endblock content %}